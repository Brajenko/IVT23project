Условие: привести квадратичную форму к каноническому виду с помощью метода Лагранжа
$$x_1^2 + 2x_1x_2 + 2x_1x_3 + x_3^2$$

Решение: сейчас ее матрица такова - симметричная матрица, где $a_{ij}$ отвечает за слагаемое $x_i x_j$. По диагонали $a_{ii}$ мы берем коэффициенты при $x_i^2$, а на элементе $a_{ij}$ берем половинный коэффициент, от того что стоит при $x_i x_j$:
$$\pmatrix{1 & 1 & 1 \\ 1 & 0 & 0 \\ 1& 0 & 1}$$
Метод Лагранжа - это то же самое, что и метод выделения полных квадратов. Начинаем выделять для $x_1$. Собираем все, что с $x_1$ в скобку:
$$\array{(x_1^2 + 2x_1x_2 + 2x_1x_3) + x_3^2 \\ (x_1^2 + 2x_1(x_2 + x_3)) + x_3^2}$$
Теперь нужно скобку дополнить так, чтобы она стала полным квадратом:
$$(a^2 + 2ab + b^2) = (a+b)^2$$
Здесь довольно очевидно, что нужно прибавить:
$$(x_1^2 + 2x_1(x_2 + x_3) + \underline{(x_2 + x_3)^2}) - \underline{(x_2 + x_3)^2} + x_3^2$$
Теперь собираем квадрат:
$$(x_1 + x_2 + x_3)^2 - (x_2 + x_3)^2 + x_3^2$$
Теперь, чтобы привести к каноническому виду, нужно сделать замену базиса:
$$\cases{x_1' = x_1+x_2+x_3 \\ x'_2 = x_2 + x_3 \\ x_3' = x_3}$$
Матрица замены:
$$x' = \pmatrix{1 & 1 & 1 \\ 0 & 1 & 1 \\ 0 & 0 & 1}x$$

И тогда получим
$${x'}_1^2 - {x'}_2^2  + {x'}_3^2 $$
Матрица такой канонической формы будет
$$\pmatrix{1 & 0 & 0 \\ 0 & -1 & 0 \\ 0 & 0 & 1}$$

Проверка:
По формуле $B' = P^{T} BP$ можно найти матрицу канонической формы, если мы правильно сделали замену базиса. $P$ - матрица перехода из $x'$ в $x$.
$$\pmatrix{1 & 1 & 1 \\ 0 & 1 & 1 \\ 0 & 0 & 1}^{-1} = \pmatrix{1 & -1 & 0 \\ 0 & 1 & -1 \\ 0 & 0 & 1}$$
Теперь (если умножим), равенство действительно выполняется:
$$\pmatrix{1 & 0 & 0 \\ 0 & -1 & 0 \\ 0 & 0 & 1} =\pmatrix{1 & 0 & 0 \\ -1 & 1 & 0 \\ 0 & -1 & 1} \pmatrix{1 & 1 & 1 \\ 1 & 0 & 0 \\ 1& 0 & 1}\pmatrix{1 & -1 & 0 \\ 0 & 1 & -1 \\ 0 & 0 & 1}$$

---
Условие: привести квадратичную форму к каноническому виду с помощью метода Лагранжа:
$$2x_1^2 + 4x_1x_2 + 3x_2^2 + 4x_2x_3+7x_3^2$$

Решение: для справки, вот так выглядит матрица квадратичной формы:
$$\pmatrix{2 & 2 & 0 \\ 2 & 3 & 2 \\ 0 & 2 & 7}$$
Теперь само приведение: начинаем группировать, и начнем с $x_1$:
$$2(x_1^2 + 2x_1x_2) + 3x^2_2 + 4x_2x_3 + 7x_3^2 =$$
Достраиваем скобку до полного квадрата, и вычитаем соотвественно:
$$\array{= 2(x_1^2 + 2x_1x_2 + \underline{x_2^2}) - \underline{2x_2^2} + 3x^2_2 + 4x_2x_3 + 7x_3^2 = \\ = 2(x_1 + x_2)^2 - 2x_2^2 + 3x_2^2 + 4x_2x_3 + 7x_3^2}$$
Делаем первую замену базиса: $x_1' = x_1 + x_2$:
$$=2{x'}_1^2 - 2x_2^2 + 3x_2^2 + 4x_2x_3 + 7x_3^2$$
Работа с $x_1$ закончена. Выделим члены, независящие от $x_1$, за $k'(x)$:
$$k'(x) = x^2_2 + 4x_2x_3 + 7x_3^2=$$
Начинаем работу с $x_2$: заносим в скобки и выделяем полный квадрат:
$$=(x^2_2 + 4x_2x_3 + 4x_3^2) + 3x_3^2= (x_2+2x_3)^2 + 3x_3^2$$
Делаем замену $x_2' = x_2+2x_3$. Ну и $x_3' = x_3$.
$$k'(x) = {x'}_2^2 + 3{x'}_3^2$$
Соединяем все вместе:
$$k(x) = 2{x'}_1^2 + {x'}_2^2 + 3{x'}_3^2$$
Только сейчас это диагональная форма. Чтобы сделать ее канонической, нужно поделить на корни коэффициентов при числах:
$$k(x) = {x'}_1^2 + {x'}_2^2 + {x'}_3^2$$
Замена базиса:
$$\cases{x_1' = x_1\sqrt 2+x_2\sqrt 2 \\ x'_2 = x_2+2x_3 \\ x'_3 = x_3\sqrt 3}$$
$$x' = \pmatrix{\sqrt 2 & \sqrt 2 & 0 \\ 0 & 1 & 2 \\ 0 & 0 & \sqrt 3}x$$

---
Условие: привести квадратичную форму к каноническому виду с помощью метода Лагранжа:
$$x_1^2 + 2x_1x_2 + 2x_2x_3$$

Решение: первым делом, работаем с $x_1$:
$$\array{(x_1^2 + 2x_1x_2 + x_2^2) - x_2^2 + 2x_2x_3 \\ (x_1+x_2)^2 - x_2^2 + 2x_2x_3}$$
Теперь работаем с $x_2$:
$$\array{(x_1+x_2)^2-(x_2^2 - 2x_2x_3 + x_3^2) + x_3^2 \\ (x_1+x_2)^2-(x_2 - x_3)^2 + x_3^2}$$
Замены:
$$\cases{x_1' = x_1 + x_2 \\ x'_2 = x_2 - x_3 \\ x'_3 = x_3}$$
$$x' = \pmatrix{1 & 1 & 0 \\ 0 & 1 & -1 \\ 0 & 0 & 1}x$$
Итого:
$${x'}_1^2 - {x'}_2^2 + {x'}_3^2$$

---
Условие: привести квадратичную форму к каноническому виду с помощью метода Лагранжа:
$$2x_1x_2 + 2x_1x_3 + 2x_2x_3$$

Решение: и спрашивается "куда", где квадраты? В таком случае мы делаем вспомогательную замену:
$$\cases{x_1 = x_1' + x_2' \\ x_2 = x_1'-x_2' \\ x_3 = x_3'}$$
$$\array{2(x_1'+x_2')(x_1'-x_2') + 2(x_1'+x_2')x_3' + 2(x_1'-x_2')x_3' \\ 2{x'}_1^2 - 2{x'}_2^2 + 2x'_1x'_3 + 2x'_2x'_3 + 2x_1'x_3' - 2x_2'x_3' \\ 2{x'}_1^2 - 2{x'}_2^2 + 4x_1'x_3'}$$
Теперь все по старому - выделяем квадрат:
$$\array{2({x'}_1^2 + 2x_1'x'_3 + {x'}_3^2) - 2{x'}_3^2 -2{x'}_2^2 \\ 2(x_1' + x_3')^2 - 2{x'}_3^2 -2{x'}_2^2}$$
Замены:
$$\cases{x''_1 = x'_1\sqrt{2} + x'_3\sqrt{2} \\ x''_2 = x'_2\sqrt{2} \\ x''_3 = x'_3 \sqrt 2}$$
Получаем:
$${x''_1}^2 - {x''_2}^2 - {x''_3}^2$$
Составим мартицу перехода от $x''$ к $x$.
От $x'$ к $x''$ нам известна матрица:
$$x'' = \pmatrix{\sqrt 2 & 0 & \sqrt 2 \\ 0 & \sqrt 2 & 0 \\ 0 & 0 & \sqrt 2}x'$$
Соответственно
$$x' = \frac 12\pmatrix{\sqrt 2 & 0 & -\sqrt 2 \\ 0 & \sqrt 2 & 0 \\ 0 & 0 & \sqrt 2}x''$$
А матрица перехода от $x'$ к $x$ уже известна:
$$x = \pmatrix{1 & 1 & 0 \\ 1 & -1 & 0 \\ 0 & 0 & 1}x'$$
Подставляем равенство для $x'$ и перемножаем матрицы:
$$x = \frac 12\pmatrix{1 & 1 & 0 \\ 1 & -1 & 0 \\ 0 & 0 & 1}\pmatrix{\sqrt 2 & 0 & -\sqrt 2 \\ 0 & \sqrt 2 & 0 \\ 0 & 0 & \sqrt 2}x''$$
Получаем полную матрицу замены базиса:
$$\frac 12\pmatrix{1 & 1 & 0 \\ 1 & -1 & 0 \\ 0 & 0 & 1}\pmatrix{\sqrt 2 & 0 & -\sqrt 2 \\ 0 & \sqrt 2 & 0 \\ 0 & 0 & \sqrt 2} = \frac12 \pmatrix{\sqrt 2 & \sqrt 2 & -\sqrt 2 \\ \sqrt 2 & -\sqrt 2 & -\sqrt 2 \\ 0 & 0 & \sqrt 2}$$

P.S.: эти матрицы нужны, чтобы записать равенство $B' = P^T B P$, но для задач главное привести квадратичную форму к канонической, нежели считать матрицу замены базиса.
